{% extends 'layout.html.twig' %}

{% block title %}{{ movie.title }}{% endblock %}

{% block pageTitle %} {{ movie.title }} {% endblock %}

{% block main %}
<div class="row  justify-content-center">
  <div class="card col-sm-8">
      
      <div class="card-body">
          <h5 class="card-title">{{ movie.title }}</h5>
          <img class="card-img-top img-fluid" src="https://lorempixel.com/540/370/" alt="">
      <div class="card-body">
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Auteur: {{movie.author}}</li>
            <li class="list-group-item"> Réalisé le: {{ movie.releaseYear |date("m/d/Y")}}</li>
            <li class="list-group-item">catégorie: {{ movie.type}}</li>
          </ul>
          <p class="card-text"> résumé: {{movie.summary}}</p>
          {% if movie.evaluations is not empty %}
          <div class="tab-pane fade" id="evaluations">
            <table class="table table-hover ">
              <thead>
                <tr>
                  <th scope="col">Note sur 10</th>
                  <th scope="col">Commentaire</th>
                  <th scope="col">Auteur</th>
                </tr>
              </thead>
              <tbody>
                {# <!-- 3 bests evaluations -->
                {% for evaluation in movie.evaluations|sortByField('grade', 'desc')|slice(0,3) %}
                <tr>
                  <td scope="row">
                    {% for i  in 1..evaluation.grade %}
                        <i class="fas fa-star text-warning"></i>
                    {% endfor %}
                  </td>
                  <td>{{evaluation.comment}}</td>
                  <td>{{evaluation.user.username}}</td>
                </tr>
                {% endfor %}
    
                <!-- 3 worst evaluations -->
                {% for evaluation in movie.evaluations|sortByField('grade', 'asc')|slice(0,3) %}
                <tr class="table-danger">
                  <td scope="row">
                    {% for i  in 1..evaluation.grade %}
                        <i class="fas fa-star text-warning"></i>
                    {% endfor %}
                  </td>
                  <td>{{evaluation.comment}}</td>
                  <td>{{evaluation.user.username}}</td>
                </tr>
                {% endfor %} #}
              </tbody>
            </table>
          </div>
          {% endif %}
          <a href="{{ path("evaluation", {"id" : movie.id})}}" class="btn btn-primary">Evaluer</a>
          <a href="{{ path("index") }}" class="btn btn-primary">Retour</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}

